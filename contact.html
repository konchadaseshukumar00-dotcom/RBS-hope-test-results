<!DOCTYPE html>
<html>
<head>
<title>Student Result</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{font-family:Arial;background:#eef2f3;margin:0;}
.header{
 background:#0b5394;color:white;padding:15px;text-align:center;
}
.box{
 background:white;width:900px;margin:30px auto;
 padding:20px;border-radius:10px;
 box-shadow:0 0 12px #999;text-align:center;
}
input{padding:6px;margin:5px;}
button{
 background:#990000;color:white;border:none;
 padding:6px 12px;border-radius:5px;cursor:pointer;
}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #999;padding:6px;}
th{background:#0b5394;color:white;}
</style>
</head>
<body>

<div class="header">
 <h2>RBS INSTITUTIONS</h2>
 <h3>10th Class Student Result</h3>
</div>

<div class="box">

<h3>Enter Roll Number</h3>
<input id="rollInput" placeholder="Enter Roll No">
<button onclick="getResult()">Get Result</button>

<div id="resultBox"></div>

</div>

<script>
/* ðŸ”¹ Firebase Config */
const firebaseConfig = {
 apiKey: "AIzaSyDGMYTX20mKna9VGddgi6mCIyJkCgbJ7bA",
 authDomain: "rbs-institutions-portal.firebaseapp.com",
 databaseURL: "https://rbs-institutions-portal-default-rtdb.firebaseio.com",
 projectId: "rbs-institutions-portal",
 messagingSenderId: "881467222162",
 appId: "1:881467222162:web:7acd765c4f7490ea6b9e4b"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function getResult(){
 let roll = document.getElementById("rollInput").value.trim();
 if(!roll){ alert("Enter Roll Number"); return; }

 const testsRef = db.ref("tests");
 testsRef.once("value",snap=>{
   let tests = snap.val();

   if(!tests){
     resultBox.innerHTML="<p>No test results available</p>";
     return;
   }

   let html="";
   let found=false;

   Object.keys(tests).forEach(key=>{
     let t = tests[key];

     // search student result
     let res = t.results.find(r => r.roll == roll);

     if(res){
       found=true;
       html += `
        <h3>${t.testName}</h3>
        <table>
         <tr>
          <th>Subject</th>
          <th>Marks</th>
         </tr>`;

       let total=0;
       t.subjects.forEach((sub,i)=>{
         html+=`
          <tr>
           <td>${sub}</td>
           <td>${res.marks[i]}</td>
          </tr>`;
         total += Number(res.marks[i]);
       });

       html+=`
        <tr>
         <th>Total</th>
         <th>${total}</th>
        </tr>
        </table><br>`;
     }
   });

   if(!found){
     resultBox.innerHTML="<p>No results found for Roll No: "+roll+"</p>";
   } else {
     resultBox.innerHTML=html;
   }
 });
}
</script>

</body>
</html>
